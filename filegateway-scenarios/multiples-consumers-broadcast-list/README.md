# IBM Sterling File Gateway Scenarios

Broadcast one file to multiple partners. The list of ConsumerName is generated by a Business Process.

This support different protocols, only define on Demo_InternalPartner_NN.


# Files

| BP Name                         |            Description of Role                                          |
|---------------------------------|-------------------------------------------------------------------------|
| consumers-broadcast-list.bpml   | Business Process that generate a list of ConsumerName's.|


# Steps to Run:

**On B2Bi Dashboard**

1) Create a new Business Process: **Demo_BP_Consumer_Broadcast_Lists**, using file **consumers-broadcast-list.bpml** 


**On Filegateway**

1) Create a Partner to Send Files: Demo_Producer_01

2) Create a Partner to Receive Files: Demo_Consumer_01

3) Create a Partner to Receive Files: Demo_Consumer_02

4) Create a Partner to Receive Files: Demo_Consumer_03

5) Create a Routing Channel Template.

```
 Routing Channel Template:
    Template Name: Demo_Multiples_Consumers_Broadcast_List
    Consumer Identification: Dynamic
    Business Process Name: Demo_BP_Consumer_Broadcast_List
    Process Data Element Name: ConsumerNameList/ConsumerName

    Special Character Handling: No special character handling is specified
    Provisioning Fact List:
    Group Permissions:
        Producer Group: All Partners
        Consumer Group: All Partners
    Producer Mailbox Path: /${ProducerName}/broadcastlist
    Producer File Structures:
        Producer File Structure: Unknown{.+}
        Layer: Unknown
            File name pattern as regular expression: .+
            File name pattern group fact names, comma delimited:
    Delivery Channel Templates:
        Delivery Channel Template:
            Consumer Mailbox Path: /${ConsumerName}/Inbox
            Consumer Mailbox: Created at runtime
            Consumer Protocol: protocol or mailbox
            Consumer File Structure: Unknown{${ProducerFilename}}
            Layer: Unknown
                File name format: ${ProducerFileName}
```

6) Create a Route Channel.

* Routing Channel Template: Demo_Multiples_Consumers_Broadcast_List
* Producer: Demo_Operations_01s

**Running**

1) Logon on Myfilegateway with user **Demo_Operations_01**, and upload any file.

2) After delivery, check files on mailboxes:

* On Demo_Consumer_01
* On Demo_Consumer_02
* On Demo_Consumer_03
